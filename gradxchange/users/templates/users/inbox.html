{% extends 'users/base.html' %}

{% block body %}
<div class="container">
    <div class="inbox my-5 p-3">
        <div class="content-box bg-white rounded shadow-sm">
            <h3 class="inbox__title text-dark py-2">
                New Messages (<span class="text-danger">{{ unreadCount }}</span>)
            
            </h3>

            <ul class="list-group list-group-flush">
                {% regroup messageRequests by sender as messageRequests_by_sender %}
                {% for sender_group in messageRequests_by_sender %}
                {% with sender=sender_group.grouper %}
                <li class="list-group-item list-group-item-action flex-column align-items-start">
                    <a href="{% url 'chat' profile_id=sender.id %}" class="text-decoration-none text-dark">
                        <div>
                            <h5 class="mb-1 message__author">
                                From: {{ sender }}
                                {% if not sender_group.list.0.is_read %}
                                <span class="ml-2 badge badge-info">New</span>
                                {% endif %}
                            </h5>
                            <small class="message__date text-muted">{{ sender_group.list.0.created }}</small>
                        </div>
                        <d class="text-right">
                            <p class="mb-1 message__subject text-muted">
                                <!--latest text snippet-->
                            </p>
                        </d </a>
                </li>
                {% endwith %}
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}